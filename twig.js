/**
 * twig.js
 * https://github.com/schmittjoh/twig.js
 *
 * (C) 2011 Johannes M. Schmitt <schmittjoh@gmail.com>
 * Licensed under the Apache 2.0 License.
 *
 * Portions of this code are from the Google Closure Library received
 * from the Closure Authors under the Apache 2.0 License.
 */
(function() {var e=!0,g=null,i=!1;function k(a){return function(){return this[a]}}var l,m=this;function n(a,b,c){a=a.split(".");c=c||m;!(a[0]in c)&&c.execScript&&c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&void 0!==b?c[d]=b:c=c[d]?c[d]:c[d]={}}
function p(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function q(a){return"array"==p(a)}function r(a){return"string"==typeof a}function s(a){var b=typeof a;return"object"==b&&a!=g||"function"==b}var t="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),u=0;function v(a,b,c){return a.call.apply(a.bind,arguments)}
function w(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function x(a,b,c){x=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?v:w;return x.apply(g,arguments)}function y(a,b){n(a,b,void 0)};var z=/&/g,A=/</g,B=/>/g,C=/\"/g,D=/[&<>\"]/,E={"\x00":"\\0","\u0008":"\\b","\u000c":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\"},F={"'":"\\'"};var G;(G="ScriptEngine"in m&&"JScript"==m.ScriptEngine())&&(m.ScriptEngineMajorVersion(),m.ScriptEngineMinorVersion(),m.ScriptEngineBuildVersion());function H(a,b){this.a=G?[]:"";a!=g&&this.append.apply(this,arguments)}G?(H.prototype.d=0,H.prototype.append=function(a,b,c){b==g?this.a[this.d++]=a:(this.a.push.apply(this.a,arguments),this.d=this.a.length);return this}):H.prototype.append=function(a,b,c){this.a+=a;if(b!=g)for(var d=1;d<arguments.length;d++)this.a+=arguments[d];return this};H.prototype.clear=function(){G?this.d=this.a.length=0:this.a=""};H.prototype.toString=function(){if(G){var a=this.a.join("");this.clear();a&&this.append(a);return a}return this.a};function I(a,b){for(var c in a)if(b.call(void 0,a[c],c,a))return c}var J="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");function K(a,b){for(var c,d,h=1;h<arguments.length;h++){d=arguments[h];for(c in d)a[c]=d[c];for(var f=0;f<J.length;f++)c=J[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var L=Array.prototype,M=L.indexOf?function(a,b,c){return L.indexOf.call(a,b,c)}:function(a,b,c){c=c==g?0:0>c?Math.max(0,a.length+c):c;if(r(a))return!r(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},N=L.forEach?function(a,b,c){L.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,h=r(a)?a.split(""):a,f=0;f<d;f++)f in h&&b.call(c,h[f],f,a)};var O=x,t="twig_ui_"+Math.floor(2147483648*Math.random()).toString(36);function P(a){return g===a||i===a||void 0===a||0===a?e:Q(a)?0===R(a):i}function S(a,b){K.apply(g,Array.prototype.slice.call(arguments,0));return a}function Q(a){return q(a)||r(a)||s(a)}function R(a){if(q(a))return a.length;if(r(a))return a.length;if(s(a)){var b=0,c;for(c in a)b++;return b}throw Error(typeof a+" is not countable.");}function T(a,b,c){if(q(a))N(a,b,c);else for(var d in a)b.call(c,a[d],d,a)};function U(a){this.env_=a;this.c=[];this.m={}}l=U.prototype;l.r=k("c");l.A=function(a){this.c=a};l.G=function(a){this.m=a};l.getParent=function(a){a=this.getParent_(a);return i===a?i:this.env_.e(a)};l.z=function(a,b,c){if(a in this.m){var d=new H;this.m[a](d,b,c||{});return d.toString()}d=this.getParent(b);if(i!==d)return d.k(a,b,c);throw Error("The template '"+this.H()+"' has no parent, and no trait defining the block '"+a+"'.");};
l.k=function(a,b,c){if(c&&a in c){var d=new H,h=c[a];delete c[a];h(d,b,c);return d.toString()}if(a in this.c)return d=new H,this.c[a](d,b,c||{}),d.toString();d=this.getParent(b);return i!==d?d.k(a,b,c):""};l.j=function(a,b){var c=new H;this.render_(c,a||{},b||{});return c.toString()};function V(){this.b={};this.g={};this.h={};this.l={};this.f={};this.o={};this.p=i}l=V.prototype;l.j=function(a,b){var c=this.e(a);return c.j.call(c,S({},this.o,b||{}))};l.filter=function(a,b,c){if(!(a in this.g))throw Error("The filter '"+a+"' does not exist.");return this.g[a].apply(g,Array.prototype.slice.call(arguments,1))};l.v=function(a,b,c){if(!(a in this.h))throw Error("The function '"+a+"' does not exist.");return this.h[a].apply(g,Array.prototype.slice.call(arguments,1))};
l.test=function(a,b,c){if(!(a in this.l))throw Error("The test '"+a+"' does not exist.");return this.l[a].apply(g,Array.prototype.slice.call(arguments,1))};l.C=function(a,b){this.g[a]=b};l.D=function(a,b){this.h[a]=b};l.F=function(a,b){this.l[a]=b};l.t=k("o");l.i=function(){this.p=e;T(this.b,function(a){a.i()})};l.u=function(a){return a in this.b};l.getExtension=function(a){if(!(a in this.b))throw Error('The "'+a+'" extension is not enabled.');return this.b[a]};
l.n=function(a){this.b[a.getName()]=a};l.w=function(a){delete this.b[a]};l.B=function(a){T(a,function(a){this.n(a)})};l.s=k("b");l.e=function(a){var b=a[t]||(a[t]=++u);if(b in this.f)return this.f[b];i===this.p&&this.i();a=new a(this);return this.f[b]=a};function W(a){this.q=a}W.prototype.toString=k("q");window.Twig=new V;y("goog.provide",function(a){n(a)});y("twig.attr",function(a,b,c,d,h){d=d||"any";h=void 0!==h?h:i;if(b in a){if("array"!==d&&"function"==p(a[b]))return h?e:a[b].apply(a,c||[]);if("method"!==d)return h?e:a[b]}if("array"===d||q(a))return h?i:g;var b=b.toLowerCase(),f="get"+b,j="is"+b;return(b=I(a,function(a,b){b=b.toLowerCase();return b===f||b===j}))&&"function"==p(a[b])?h?e:a[b].apply(a,c||[]):h?i:g});y("twig.bind",O);
y("twig.inherits",function(a,b){function c(){}c.prototype=b.prototype;a.I=b.prototype;a.prototype=new c});y("twig.extend",S);y("twig.spaceless",function(a){return a.replace(/>[\s\xa0]+</g,"><").replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")});y("twig.range",function(a,b){for(var c=[];a<=b;a+=1)c.push(a);return c});y("twig.contains",function(a,b){var c;if(q(a))c=0<=M(a,b);else if(r(a))c=-1!=a.indexOf(b);else a:{for(c in a)if(a[c]==b){c=e;break a}c=i}return c});y("twig.countable",Q);y("twig.count",R);
y("twig.forEach",T);y("twig.empty",P);y("twig.filter.capitalize",function(a,b){return b.charAt(0).toUpperCase()+b.substring(1)});
y("twig.filter.escape",function(a,b,c,d,h){if(h&&b instanceof W)return b.toString();b=b==g?"":""+b;if("js"===c){a=""+b;if(a.quote)b=a.quote();else{b=['"'];for(c=0;c<a.length;c++){var f=a.charAt(c),j=f.charCodeAt(0),d=b,h=c+1,o;if(!(o=E[f])){if(!(31<j&&127>j))if(f in F)f=F[f];else if(f in E)f=F[f]=E[f];else{j=f;o=f.charCodeAt(0);if(31<o&&127>o)j=f;else{if(256>o){if(j="\\x",16>o||256<o)j+="0"}else j="\\u",4096>o&&(j+="0");j+=o.toString(16).toUpperCase()}f=F[f]=j}o=f}d[h]=o}b.push('"');b=b.join("")}return b.substring(1,
b.length-1)}if(!c||"html"===c)return a=b,D.test(a)&&(-1!=a.indexOf("&")&&(a=a.replace(z,"&amp;")),-1!=a.indexOf("<")&&(a=a.replace(A,"&lt;")),-1!=a.indexOf(">")&&(a=a.replace(B,"&gt;")),-1!=a.indexOf('"')&&(a=a.replace(C,"&quot;"))),a;throw Error("The type '"+c+"' is not supported.");});y("twig.filter.length",function(a,b){return R(b)});y("twig.filter.def",function(a,b){return P(a)?b||"":a});y("twig.filter.replace",function(a,b){for(var c in b)a=a.replace(RegExp(c,"g"),b[c]);return a});
y("twig.StringBuffer",H);H.prototype.append=H.prototype.append;H.prototype.toString=H.prototype.toString;V.prototype.createTemplate=V.prototype.e;V.prototype.filter=V.prototype.filter;V.prototype.invoke=V.prototype.v;V.prototype.test=V.prototype.test;V.prototype.setFilter=V.prototype.C;V.prototype.setFunction=V.prototype.D;V.prototype.setTest=V.prototype.F;V.prototype.render=V.prototype.j;V.prototype.getGlobals=V.prototype.t;V.prototype.initRuntime=V.prototype.i;V.prototype.hasExtension=V.prototype.u;
V.prototype.getExtension=V.prototype.getExtension;V.prototype.addExtension=V.prototype.n;V.prototype.removeExtension=V.prototype.w;V.prototype.setExtensions=V.prototype.B;V.prototype.getExtensions=V.prototype.s;y("twig.Template",U);U.prototype.setTraits=U.prototype.G;U.prototype.setBlocks=U.prototype.A;U.prototype.getBlocks=U.prototype.r;U.prototype.renderParentBlock=U.prototype.z;U.prototype.renderBlock=U.prototype.k;y("twig.Markup",W);})();
