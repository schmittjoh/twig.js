/**
 * twig.js
 * https://github.com/schmittjoh/twig.js
 *
 * (C) 2011 Johannes M. Schmitt <schmittjoh@gmail.com>
 * Licensed under the Apache 2.0 License.
 *
 * Portions of this code are from the Google Closure Library received
 * from the Closure Authors under the Apache 2.0 License.
 */
(function() {var f,g=this;function k(a,b,c){a=a.split(".");c=c||g;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c=c[d]?c[d]:c[d]={}:c[d]=b}
function m(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function n(a){return"array"==m(a)}function p(a){return"string"==typeof a}function q(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var r="closure_uid_"+(1E9*Math.random()>>>0),t=0;function v(a,b,c){return a.call.apply(a.bind,arguments)}
function w(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function x(a,b,c){x=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?v:w;return x.apply(null,arguments)}function y(a,b){k(a,b,void 0)};var z=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},A=/&/g,B=/</g,C=/>/g,D=/"/g,E=/'/g,F=/\x00/g,G=/[\x00&<>"']/,H={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\","\x3c":"\x3c"},I={"'":"\\'"};function J(a,b){null!=a&&this.append.apply(this,arguments)}f=J.prototype;f.a="";f.set=function(a){this.a=""+a};f.append=function(a,b,c){this.a+=String(a);if(null!=b)for(var d=1;d<arguments.length;d++)this.a+=arguments[d];return this};f.clear=function(){this.a=""};f.toString=function(){return this.a};function K(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function L(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function M(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function N(a,b){return null!==a&&b in a}function O(a,b){for(var c in a)if(b.call(void 0,a[c],c,a))return c}function aa(a){var b={},c;for(c in a)b[c]=a[c];return b}var P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function ba(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var h=0;h<P.length;h++)c=P[h],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var ca=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(p(a))return p(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},da=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=p(a)?a.split(""):a,h=0;h<d;h++)h in e&&b.call(c,e[h],h,a)};
function ea(a){for(var b={},c=0,d=0;d<a.length;){var e=a[d++],h;h=e;h=q(h)?"o"+(h[r]||(h[r]=++t)):(typeof h).charAt(0)+h;Object.prototype.hasOwnProperty.call(b,h)||(b[h]=!0,a[c++]=e)}a.length=c};var fa=x,r="twig_ui_"+Math.floor(2147483648*Math.random()).toString(36);function Q(a){return null===a||!1===a||void 0===a||0===a?!0:R(a)?0===S(a):!1}function T(a,b){ba.apply(null,Array.prototype.slice.call(arguments,0));return a}function R(a){return n(a)||p(a)||q(a)}function S(a){if(n(a))a=a.length;else if(p(a))a=a.length;else if(q(a)){var b=0,c;for(c in a)b++;a=b}else a=("number"===typeof a?a.toString():"").length;return a}function U(a,b,c){n(a)?da(a,b,c):K(a,b,c)}
function V(a){return a.replace(/[\.\\+*?\[\]<>(){}^$=!|:-]/g,"\\$\x26")};function W(a){this.env_=a;this.c=[];this.u={}}f=W.prototype;f.D=function(){return this.c};f.M=function(a){this.c=a};f.U=function(a){this.u=a};f.getParent=function(a){a=this.getParent_(a);return!1===a?!1:this.env_.f(a)};f.L=function(a,b,c){if(a in this.u){var d=new J;this.u[a](d,b,c||{});return d.toString()}d=this.getParent(b);if(!1!==d)return d.o(a,b,c);throw Error("The template '"+this.w()+"' has no parent, and no trait defining the block '"+a+"'.");};
f.o=function(a,b,c){if(c&&a in c){var d=new J,e=c[a];delete c[a];e(d,b,c);return d.toString()}if(a in this.c)return d=new J,this.c[a](d,b,c||null),d.toString();d=this.getParent(b);return!1!==d?d.o(a,b,c):""};f.m=function(a,b){var c=new J;this.render_(c,a||{},b||{});return c.toString()};
f.B=function(a,b,c,d){if(!a["macro_"+b])throw Error("The macro "+b+" is not defined in "+a.w()+".");if(void 0===d)return a["macro_"+b].apply(a,c);throw Error("Positional arguments, or default values in macro arguments are not supported, yet.");};function X(a){this.C=a}X.prototype.toString=function(){return this.C};function Y(a,b,c,d,e){if(e&&b instanceof X)return b.toString();b=null==b?"":String(b);if(ga===c){a=String(b);b=['"'];for(c=0;c<a.length;c++){e=a.charAt(c);var h=e.charCodeAt(0);d=c+1;var l;if(!(l=H[e])){if(!(31<h&&127>h))if(e in I)e=I[e];else if(e in H)e=I[e]=H[e];else{l=e.charCodeAt(0);if(31<l&&127>l)h=e;else{if(256>l){if(h="\\x",16>l||256<l)h+="0"}else h="\\u",4096>l&&(h+="0");h+=l.toString(16).toUpperCase()}e=I[e]=h}l=e}b[d]=l}b.push('"');b=b.join("");return b.substring(1,b.length-1)}if(!c||ha===
c)return a=b,G.test(a)&&(-1!=a.indexOf("\x26")&&(a=a.replace(A,"\x26amp;")),-1!=a.indexOf("\x3c")&&(a=a.replace(B,"\x26lt;")),-1!=a.indexOf("\x3e")&&(a=a.replace(C,"\x26gt;")),-1!=a.indexOf('"')&&(a=a.replace(D,"\x26quot;")),-1!=a.indexOf("'")&&(a=a.replace(E,"\x26#39;")),-1!=a.indexOf("\x00")&&(a=a.replace(F,"\x26#0;"))),a;if(ia===c)return encodeURIComponent(b);throw Error("The type '"+c+"' is not supported.");}var ha="html",ga="js",ia="url";function Z(){this.b={};this.i={};this.j={};this.s={};this.h={};this.g={};this.A=!1}f=Z.prototype;f.m=function(a,b){var c=this.f(a);return c.m.call(c,T({},this.g,b||{}))};f.filter=function(a,b,c){if(!N(this.i,a))throw Error("The filter '"+a+"' does not exist.");return this.i[a].apply(null,Array.prototype.slice.call(arguments,1))};f.I=function(a,b,c){if(!N(this.j,a))throw Error("The function '"+a+"' does not exist.");return this.j[a].apply(null,Array.prototype.slice.call(arguments,1))};
f.test=function(a,b,c){if(!N(this.s,a))throw Error("The test '"+a+"' does not exist.");return this.s[a].apply(null,Array.prototype.slice.call(arguments,1))};f.escape=function(a,b,c,d){return Y(0,a,b,0,d)};f.J=function(a,b,c){var d=this.f(a),e=d["macro_"+b];if(!e)throw Error("The macro '"+b+"' does not exist on template '"+d.w()+"'.");return e.apply(d,Array.prototype.slice.call(arguments,2)).toString()};f.O=function(a,b){this.i[a]=b};f.P=function(a,b){this.j[a]=b};f.T=function(a,b){this.s[a]=b};
f.S=function(a){this.g=a};f.R=function(a,b){this.g[a]=b};f.G=function(){return this.g};f.l=function(){this.A=!0;K(this.b,function(a){a.l()},this)};f.H=function(a){return N(this.b,a)};f.getExtension=function(a){if(!N(this.b,a))throw Error('The "'+a+'" extension is not enabled.');return this.b[a]};f.v=function(a){this.b[a.getName()]=a};f.K=function(a){delete this.b[a]};f.N=function(a){K(a,function(a){this.v(a)})};f.F=function(){return this.b};
f.f=function(a){var b=a[r]||(a[r]=++t);if(N(this.h,b))return this.h[b];!1===this.A&&this.l();a=new a(this);return this.h[b]=a};window.Twig=new Z;y("goog.provide",function(a){k(a,void 0)});y("goog.require",function(){});
y("twig.attr",function(a,b,c,d,e){d=d||"any";e=void 0!==e?e:!1;if(!q(a)&&!n(a))return e?!1:null;if(b in a){if("array"!==d&&"function"==m(a[b]))return e?!0:a[b].apply(a,c||[]);if("method"!==d)return e?!0:a[b]}if("array"===d||n(a))return e?!1:null;b=b.toLowerCase();var h="get"+b,l="macro_"+b,u="is"+b;return(b=O(a,function(a,b){b=b.toLowerCase();return b===h||b===u||b===l}))&&"function"==m(a[b])?e?!0:a[b].apply(a,c||[]):e?!1:null});y("twig.bind",fa);
y("twig.inherits",function(a,b){function c(){}c.prototype=b.prototype;a.W=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.V=function(a,c,h){for(var l=Array(arguments.length-2),u=2;u<arguments.length;u++)l[u-2]=arguments[u];return b.prototype[c].apply(a,l)}});y("twig.extend",T);y("twig.spaceless",function(a){return z(a.replace(/>[\s\xa0]+</g,"\x3e\x3c"))});y("twig.range",function(a,b){for(var c=[];a<=b;a+=1)c.push(a);return c});
y("twig.contains",function(a,b){var c;if(n(a))c=0<=ca(a,b);else if(p(a))c=-1!=a.indexOf(b)&&(""!==b||""===a);else a:{for(c in a)if(a[c]==b){c=!0;break a}c=!1}return c});y("twig.countable",R);y("twig.count",S);y("twig.forEach",U);y("twig.empty",Q);y("twig.createObj",function(a){for(var b={},c=0;c<arguments.length;c+=2)b[arguments[c]]=arguments[c+1];return b});y("twig.pregQuote",V);y("twig.filter.capitalize",function(a,b){return b.charAt(0).toUpperCase()+b.substring(1)});y("twig.filter.escape",Y);
y("twig.filter.first",function(a,b){return n(b)?b[0]:q(b)?b[Object.keys(b)[0]]:p(b)?b.charAt(0):""});y("twig.filter.length",function(a,b){return S(b)});y("twig.filter.def",function(a,b){return Q(a)?b||"":a});y("twig.filter.replace",function(a,b){for(var c in b){var d;d=V(c);a=a.replace(new RegExp(d,"g"),b[c])}return a});y("twig.filter.join",function(a,b){var c=b||"",d=new J,e=!0;U(a,function(a){e||d.append(c);e=!1;d.append(a)});return d.toString()});y("twig.filter.keys",M);
y("twig.filter.upper",function(a,b){return b.toUpperCase()});y("twig.filter.lower",function(a,b){return b.toLowerCase()});y("twig.filter.nl2br",function(a){return a.replace(/\n/g,"\x3cbr /\x3e")});y("twig.filter.abs",function(a){return Math.abs(a)});y("twig.filter.title",function(a,b){return b.split(" ").map(function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()}).join(" ")});
y("twig.filter.trim",function(a,b){var c="\n ";b&&(c=V(b));a=a.replace(new RegExp("^["+c+"]+"),"");return a=a.replace(new RegExp("["+c+"]+$"),"")});y("twig.filter.json_encode",function(a){return JSON.stringify(a)});y("twig.filter.last",function(a,b){if(n(b))return b[b.length-1];if(q(b)){var c=Object.keys(b);return b[c[c.length-1]]}return p(b)?b.charAt(b.length-1):""});
y("twig.filter.reverse",function(a,b){if(n(b))return b.reverse();if(q(b)){for(var c={},d=M(b).reverse(),e=0;e<d.length;e++)c[d[e]]=b[d[e]];return c}return p(b)?b.split("").reverse().join(""):b});y("twig.filter.batch",function(a,b,c){for(var d=Array(Math.ceil(a.length/b)),e=d.length*b,h=0;h<e;h++){var l=Math.floor(h/b);"undefined"===typeof d[l]&&(d[l]=[]);"undefined"!==typeof a[h]?d[l].push(a[h]):p(c)&&d[l].push(c)}return d});
y("twig.filter.merge",function(a,b){var c=[];n(a)&&n(b)?(c=a.concat(b),ea(c)):q(a)&&q(b)&&(c=aa(a),K(b,function(a,b){c[b]=a}));return c});y("twig.functions.max",function(a){return n(a)?Math.max.apply(null,a):q(a)?Math.max.apply(null,L(a)):Math.max.apply(null,arguments)});y("twig.functions.min",function(a){return n(a)?Math.min.apply(null,a):q(a)?Math.min.apply(null,L(a)):Math.min.apply(null,arguments)});
y("twig.functions.random",function(a,b){return n(b)||p(b)?b[Math.floor(Math.random()*b.length)]:"number"==typeof b?Math.floor(Math.random()*b):null===b||"undefined"===typeof b?Math.floor(2147483647*Math.random()):""});y("twig.StringBuffer",J);J.prototype.append=J.prototype.append;J.prototype.toString=J.prototype.toString;y("twig.Environment",Z);Z.prototype.createTemplate=Z.prototype.f;Z.prototype.filter=Z.prototype.filter;Z.prototype.invoke=Z.prototype.I;Z.prototype.test=Z.prototype.test;
Z.prototype.escape=Z.prototype.escape;Z.prototype.macro=Z.prototype.J;Z.prototype.setFilter=Z.prototype.O;Z.prototype.setFunction=Z.prototype.P;Z.prototype.setTest=Z.prototype.T;Z.prototype.render=Z.prototype.m;Z.prototype.getGlobals=Z.prototype.G;Z.prototype.setGlobals=Z.prototype.S;Z.prototype.setGlobal=Z.prototype.R;Z.prototype.initRuntime=Z.prototype.l;Z.prototype.hasExtension=Z.prototype.H;Z.prototype.getExtension=Z.prototype.getExtension;Z.prototype.addExtension=Z.prototype.v;
Z.prototype.removeExtension=Z.prototype.K;Z.prototype.setExtensions=Z.prototype.N;Z.prototype.getExtensions=Z.prototype.F;y("twig.Template",W);W.prototype.setTraits=W.prototype.U;W.prototype.setBlocks=W.prototype.M;W.prototype.getBlocks=W.prototype.D;W.prototype.renderParentBlock=W.prototype.L;W.prototype.renderBlock=W.prototype.o;W.prototype.callMacro=W.prototype.B;y("twig.Markup",X);})();
